---
layout: post
title:  Effective Java Rule.59+   
tags: Effective Study 
categories: Effective
---   

#### 불필요한 checkedException은 사용하지마라 

checkedException은 말 그대로, 사용자가 throws 나 try-catch로 코드를 확인해야하는 번거로움이 발생합니다. 

> 실제로 외부 api 쓰다보면 귀찮아져서, 그냥 throws로 사용합니다.

게다가 try-catch를 사용한다고 해도, 예외처리의 중복 문제나 올바른 처리인가 에대한 고민은 사용자에게 넘어갑니다. 

이같은 이유로 checkedException은 되도록 사용하지 말라고 말합니다.

checkException 말고, 상태확인 메서드를 만들어서 사용하는 편이 더 좋은 설계라고 언급하고 있습니다.

> ex Iterator 

#### 표준 예외를 사용하라 

되도록이면 많이 알려진, 표준 예외를 사용하라는 룰입니다.

API를 사용하는 사용자 입장에서도, 처음보는 예외에 대한 처리를 고민해야하기 때문이죠.

책에서는 몇가지 예외에 대해 설명하고 있는데, 여기서는 설명하지 않습니다.


#### 추상화 수준에 맞는 예외를 던져라. 


예외도 클래스이다보니 계층이 존재하고 만약 하위 클래스에서 예외가 발생 했을 때, 그걸 그대로 던지지 말고 상위 수준으로 추상화 하라고 합니다.

    public E get(int index){
        ListIterator<E> i = listIterator(index);
        try{
            return i.next();
        }catch(NoSuchElementException e){
            throw new IndexOutOfBoundsException("~");
        }
    }

이 룰과 어울리는 대표적인 코드가 바로 이 코드입니다. 

> List Interface 의 함수 입니다.

위 코드는 아무런 처리를 안하는것 보다야 좋지만, 남용해서는 안된다고 합니다. 되도록 하위 클래스에서 예외가 안나오도록 처리해야하고, 그것마저 안되면 하위 클래스에서 예외를 처리해야합니다. 

> 그래야 오류분석을 진행하는데 원활합니다.

#### 메서드에서 던져지는 모든 예외에 대해 문서를 남겨라

너무나 당연한 말입니다 .

> java doc 으로 남기세요  

#### 어떤 오류인지를 드러내는 정보를 상세한 메시지에 담으라

너무나 당연한 말입니다222.

> 예외와 관련된 모든 인자와 필드값에 대해 알려줘야 사용자가 처리할 수 있습니다.

#### 실패 원자성 달성을 위해 노력하라

예외가 발생할 경우, 객체의 상태가 실행되기 전과 동일해야 한다는 룰으로, 개인적으로는 트랜잭션과 같은 느낌으로 이해하고 있습니다. 

1. 실패할 가능성이 있는 코드를 전부, 객체상태를 바꾸는 코드 위에 배치한다.

2. 복구 코드를 작성한다.

3. 임시 복사본을 이용한다.   

사실 이는 언제나 달성할 수 있는건 아니여서, Concurrent와 관련된 예외가 발생했을 때는, 객체가 바꼇을거라 예상하는게 맞습니다.

오류는 이번룰과는 무관합니다.   

만약 이 룰을 못지킨다면, 명세화를 당연히 ... 


lusiue@gmail.com   
