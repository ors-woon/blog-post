---
layout: post
title: 00-Unit-Test와-TDD
tags:  Test TDD
categories:  Test
---       

매번 프로젝트를 진행할때마다, 많이 듣는 말이 있습니다.     

	Test는 중요하다.
	Test는 꼭 하자 
	TDD를 하자 ....      

다만 실제로 Test를 적극적으로 한 적은 드물었습니다.     

> Test 파일에는 단순히 DB에 접근하는 로직들만이 있었습니다.     

그렇다보니 작성한 코드를 검증할 방법이 없었고, 개발중에 문제가 생길때마다 Tomcat을 재가동 하고 다시 실행하는 방식으로 진행했습니다.    

> 단순히 한번 개발하고 관두는 프로젝트였기에 가능했던 방식이였습니다.      
> 혼자 개발했다는 점도 한 몫 했죠 ...    

이번 프로젝트를 하면서, 다른 사람이 개발한 코드를 읽게되는 경우가 생겼습니다. 

> 옆 사람과 개발을 했기에 문제가 생기면 바로 질문이 가능한 상황이였습니다만 .. 
     
만약 불특정 다수의 사람들과 개발을 진행하다가  문제가 생기면, 그 사람에게 달려갈 수는 없겠죠  
이런 상황에서 Test코드가 있다면 그럴 필요가 없어지겠죠 (?) 

이번에 Test에 대해 공부할 좋은 기회가 생겨, UnitTest 및 TDD에 대해 정리해보도록 하겠습니다.    

#### Unit Test         

단위테스트란 source code의 특정 모듈이 의도 된 대로 정확히 작동하는지를 검증하는 방법입니다. 즉 모든 함수에 대한 test code를 작성하여 **신뢰도**를 높이는 방법입니다.      

단위테스트의 목적은 쉽게 말해서 다음과 같습니다.     

	생각을 하고 만들어라 !         

> 생각없이 만들고 리팩토링할꺼면 , 생각을 하면서 우아한 코드를 작성하자!     

단위테스트의 흐름을 단순하게 설명하자면 다음과 같습니다.    
    
	예상하고 (given) :: 준비하기
	실행하고 (when) :: 실행하기
	검증하라 (then) :: 검증하기 

Test를 작성할때 위와같이 3단계로 구성된다고 합니다.    
검증하기전 필요한 데이터를 준비하고, 검증하기 위한 코드를 실행하고, 마지막으로 검증을 하는 흐름 입니다.     

이러한 단위테스트가 어려운 이유는 개발자가 제어하기 힘든 영역이 존재하기 때문입니다.   

> 임의성 , 영속성 , 시간 , Network 등 ...     

이를 구현하기 위한 다양한 방법이 존재합니다만 ... 
( 이부분은 다음에 정리해보도록 하겠습니다. )     



#### TDD       

**TDD(Test-Driven Development)**의 개념은 다음과 같습니다.    

	테스트 주도 개발(Test-driven development TDD)은 매우 짧은 개발 사이클을
	반복하는 소프트웨어 개발 프로세스 중 하나이다.     
	[ Wiki ]    

기존 Software 개발의 Process는 설계를 진행한 뒤 개발을 하고 마지막으로 Test를 진행게 됩니다. 다만 이때, Test 단계에서 문제가 생기면 설계부분으로 돌아가서 수정해야하는 일이 발생합니다.    

> 결국 추가적인 비용이 듭니다.      
기존의 Process는 설계단계에 충분한 시간을 쏟지 못한다는 단점을 갖고있었습니다. TDD는 이를 보완하기위해 설계에 충분한 시간을 할당하기위한 Process 방식을 채택합니다.    

TDD는 이와같은 비용을 줄이고자 나온 개발방법론 입니다. TDD의 Process는 다음과 같습니다.  

	설계 -> Test -> 설계(문제가 생길시) -> Test -> (문제가 없다면) 코드작성    

즉, Test에서 설계가 완벽해질때까지 다음단계로 진행되지 않습니다.   

> 이와같은 Process로 설계에 충분한 시간을 쏟을 수 있습니다.    

설계에 충분한 시간을 쏟을 수 있다는 말은,**높은 퀄리티의 Software**를 개발할 수 있다는걸 의미합니다.  

	높은 퀄리티의 Software의 조건(?)
	1. 절대 Error 나 Bug가 없어야한다.
	2. 요구사항의 변경이 일어났을때, 손쉽게 반영 가능해야한다.
	3. 다른이가 코드를 봐도 쉽게 이해하고, 수정할 수 있어야한다.     

> 2,3번은 뭔가 객체지향의 장점과 비슷하다고 생각됩니다...    

추가적으로 TDD를 사용하면 재 설계시간의 단축과 **테스트 문서**를 대체 할 수 있다는 장점또한 존재합니다.    

> Test 코드만으로 문서를 대체할 수 있다는 것을 의미합니다.    

이렇게 많은 장점이 존재하는데, 저를 포함한 제 주변사람들은 왜 TDD를 사용하지 않을까요 ?  
단순히 TDD를 몰라서 ? , 회사에서 채택한 개발방법론때문에 ..?   

TDD를 사용하지 않는 가장큰 이유는 **생산성**에 있습니다.    

TDD의 목적은 말씀드린바와 같이 **높은 퀄리티의 Software**를 보장하는 것입니다.     
다만, 기업에서 퀄리티보다 **생산성**을 우선시 한다면 말이 달라집니다.    
내일 당장 서비스를 출시해야하는데 TDD를 하면서, 설계에 많은 시간을 쏟는건 비효율적입니다. 
마감기한이 짧거나 일회성 프로젝트인경우, 설계단계에서 많은 시간을 쏟을 이유는 없습니다.    
 
> 어느 정도의 learning time이 소모된다는 점도 한 몫 합니다.    
    

**높은 퀄리티의 Software** .. ?      
개인적인 생각(+)      
높은 퀄리티의 코드가 단순히 Test를 잘한다고 만들어지는 것은 아니라고 생각합니다. TDD의 장점을 발휘하기 위해서는 설계적인 지식을 비롯한 SoftWare개발의 전반적인 이해를 갖고있어야한다고 생각합니다.   


     
#### 마무리     

다음엔 TDD와 관련된 작은 프로젝트와 Mockito에 대해서 정리해보도록 하겠습니다.    


2017 - 08 -21           

lusiue@naver.com